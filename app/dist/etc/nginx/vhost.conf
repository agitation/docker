root /srv/www/web/;

# static content ...
location ~* \.(txt|gif|html|jpe?g|png|ico|js|css|woff|ttf|eot|htc)$ { include caching.conf; }
location ~* /(bundles|js|css|static)/.*                             { include caching.conf; }

location / {
	# try to serve file directly, fallback to rewrite
	try_files $uri @rewriteapp;
}

location @rewriteapp {
	rewrite ^(.*)$ /app.php/$1 last;
}

location ~ ^/app\.php(/|$) {
	fastcgi_pass 127.0.0.1:9000;
	fastcgi_split_path_info ^(.+\.php)(/.*)$;
	include fastcgi.conf;
	fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
	fastcgi_read_timeout 300;
}
